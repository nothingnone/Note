<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-776c2819-7e64-4c07-b38a-7de66a64fb42"></attachment><ul><li>c++指针令其对象的作用域混乱。</li><li>C++语言规范确保了析构函数总是会被调用，所以即使有异常抛出，mutex也会被正确地解锁</li><li>在定线程程序中，多线程、同步措施尚且可以灵活使用，判断可以相对宽松。而在不定线程中，其他线程可能由于异常退出、混乱等等导致许多问题。此时，应当尽可能将线程解耦，并且在临界操作中严苛判断，编写“安全代码”。由此而来，无论在编写定或不定线程程序中必须养成习惯，权衡安全效率，在”临界操作“部分代码添加警示注释&gt;&gt;&gt;!!!&lt;&lt;&lt;。并思考以下问题，函数是否可重入或局部重入，线程是否存在存在异常时不释放锁，是否存在死锁，是否存在未定义行为（程序不在设计逻辑内运行，尽可能少写裸奔程序），</li><li>注意std函数的应用。例如，std::strtok为不可重新进入函数，因为其采用静态数据保存要被分割的字符串。问题往往就可能发生在随意调函数上。C标准库提供了std::strtok_r，可以人为传递数据存放地址，不影响效率。考虑到历史遗留因素，不可能对大量库都进行重写。</li><li>多线程策略：退化策略，锁优先级策略，冒险策略，估算策略。</li><li>智能指针也具有使用注意事项。构造类时，养成编写析构函数的习惯。一般只有在对象中new 或者make_shared等才需要编写析构释放函数。</li><li>锁，condition，promise，future，async，packaged_task</li></ul><p><br></p>