<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-a5aa438d-2e37-4257-a15f-ef216b3501c3"></attachment><ul><li>多线程程序</li><li class="ql-indent-1">线程安全：同步问题：多个线程要对某内存进行读写。不可重入程序的调用。</li><li class="ql-indent-1">多线程程序实际情况复杂，本笔记作增量shift记录。</li><li class="ql-indent-1">基本概念：多线程，同一数据，读取，计算，写入。</li><li class="ql-indent-1">倘若没有写入，且copy成本不大，选择copy。</li><li class="ql-indent-2">倘若copy成本较大，则需权衡copy和计算的成本，选择copy后计算或加读锁计算释放；前者主要消耗在于内存，copy成本（copy时必须加读锁，可通过结构体和copy构造函数加快读写速度），copy后资源立即释放。后者加锁，无需copy，计算后释放资源。</li><li class="ql-indent-2">倘若数据极大，无法copy，则采取读写锁的方式。此时，想办法采用局部加锁，局部更新的方式，避免占用。</li><li class="ql-indent-2">此时，读取操作</li><li class="ql-indent-1">若读取，写入占同小，计算占用较大。</li><li class="ql-indent-2"><br></li><li class="ql-indent-1">若三者占同均较小，但请求频率极高。</li><li class="ql-indent-1">性能影响：锁的争用，同步损耗，</li></ul><p><br></p>